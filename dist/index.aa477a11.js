let pay_load={};const create_url=()=>{let t="o_x",e=0;for(let a in pay_load){let l=a.replace(/\s/g,""),r=pay_load[a];0!=r&&(t=0==e?t+""+l+"_"+r:t+"_"+l+"_"+r,e++)}if(t.length>64)alert("the size of the payload is more than 64 bytes please remove some items");else if("o_x"===t)alert("you did not select any item");else{let e="https://t.me/kamata_staging_bot?start="+t;window.open(e,"_blank")}};$("a.qty-minus").on("click",(t=>{t.preventDefault();let e=$(t.currentTarget),a=e.closest("div").attr("id"),l=parseFloat(e.parent().parent().children("#price").text()),r=e.parent().parent().children("#pro-total"),n=e.closest("div").find("#qty"),o=parseInt(n.val()),i=$("#over-all"),p=parseFloat(i.text());o>0?(o-=1,p-=l):o=0;let s=o*l;r.children().text(s.toFixed(2)),i.text(p.toFixed(2)),n.val(o),pay_load[a]=o})),$("a.qty-plus").on("click",(t=>{t.preventDefault();let e=$(t.currentTarget),a=e.parent().attr("id"),l=parseFloat(e.parent().parent().children("#price").text()),r=e.parent().parent().children("#pro-total"),n=$("#over-all"),o=parseFloat(n.text()),i=e.closest("div").find("#qty"),p=parseInt(i.val());p<100?(p+=1,o+=l):p=100;let s=p*l;r.children().text(s.toFixed(2)),n.text(o.toFixed(2)),i.val(p),pay_load[a]=p})),$("a.btn-update").on("click",(()=>{create_url()})),$(".qty").on("blur",(t=>{t.preventDefault();let e=$(t.currentTarget),a=parseInt($(t.currentTarget).val());a<0||isNaN(a)?e.val(0):a>100&&e.val(100)})),$(".qty").on("focusin",(function(){console.log($(this).val()),$(this).data("val",$(this).val())})),$(".qty").on("change keydown",(function(t){let e=$(t.currentTarget);if(console.log(t.key),"change"==t.type||"Enter"==t.key){let t=e.data("val"),a=e.val();console.log("Prev value "+t),console.log("New value "+a);let l=e.parent().attr("id"),r=parseFloat(e.parent().parent().children("#price").text()),n=e.parent().parent().children("#pro-total"),o=$("#over-all"),i=parseFloat(o.text());a>100?a=100:(a<0||isNaN(a))&&(a=0),i+=(a-t)*r;let p=a*r;n.children().text(p.toFixed(2)),o.text(i.toFixed(2)),e.data("val",a),pay_load[l]=a}}));